
/*!
leaflet.travelnotesopenrouteservice - version 1.6.0 
build 00078 - 2019-12-29T10:18:07+0100 
Copyright 2017 2019 wwwouaiebe 
Contact: http://www.ouaie.be/
Sources: https://github.com/wwwouaiebe/leaflet.TravelNotesOpenRouteService 
License: GPL-3.0
*/


!function(){"use strict";var e={};function t(e){return Math.floor(Math.abs(e)+.5)*(e>=0?1:-1)}function r(e,r,n){var o=(e=t(e*n))-(r=t(r*n));o<<=1,e-r<0&&(o=~o);for(var i="";o>=32;)i+=String.fromCharCode(63+(32|31&o)),o>>=5;return i+=String.fromCharCode(o+63)}function n(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].slice().reverse());return t}e.decode=function(e,t){for(var r,n=0,o=0,i=0,a=[],u=0,s=0,d=null,c=Math.pow(10,Number.isInteger(t)?t:5);n<e.length;){d=null,u=0,s=0;do{s|=(31&(d=e.charCodeAt(n++)-63))<<u,u+=5}while(d>=32);r=1&s?~(s>>1):s>>1,u=s=0;do{s|=(31&(d=e.charCodeAt(n++)-63))<<u,u+=5}while(d>=32);o+=r,i+=1&s?~(s>>1):s>>1,a.push([o/c,i/c])}return a},e.encode=function(e,t){if(!e.length)return"";for(var n=Math.pow(10,Number.isInteger(t)?t:5),o=r(e[0][0],0,n)+r(e[0][1],0,n),i=1;i<e.length;i++){var a=e[i],u=e[i-1];o+=r(a[0],u[0],n),o+=r(a[1],u[1],n)}return o},e.fromGeoJSON=function(t,r){if(t&&"Feature"===t.type&&(t=t.geometry),!t||"LineString"!==t.type)throw new Error("Input must be a GeoJSON LineString");return e.encode(n(t.coordinates),r)},e.toGeoJSON=function(t,r){return{type:"LineString",coordinates:n(e.decode(t,r))}},"object"==typeof module&&module.exports&&(module.exports=e),window.L.travelNotes.addProvider(function(){const t=0,r=1,n=5,o=6;let i="",a="fr",u=null;function s(s,d){var c,l,g;(c=function(){let e="https://api.openrouteservice.org/v2/directions/";switch(u.itinerary.transitMode){case"car":e+="driving-car";break;case"bike":e+="cycling-regular";break;case"pedestrian":e+="foot-walking";break;default:return void console.log("invalid transitMode")}return e}(),l=[{headerName:"Accept",headerValue:"application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8"},{headerName:"Content-Type",headerValue:"application/json"},{headerName:"Authorization",headerValue:i}],g=function(){let e=null;return u.wayPoints.forEach(t=>{e=e?e+",":'{"coordinates":[',e+="["+t.lng.toFixed(o)+","+t.lat.toFixed(o)+"]"}),e+='],"language":"'+a+'"}'}(),new Promise(function(e,t){let r=new XMLHttpRequest;r.timeout=15e3,r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){let n=null;try{n=JSON.parse(r.responseText),e(n)}catch(e){t(e)}}else 400<=r.status?t(new Error("Error HTTP "+r.status+" "+r.statusText)):t(new Error("Error XMLHttpRequest - File : "+r.responseURL))},r.open("POST",c,!0),l&&l.forEach(e=>r.setRequestHeader(e.headerName,e.headerValue)),r.overrideMimeType("application/json"),r.send(g)})).then(o=>(function(o,i,a){o.routes&&t!==o.routes.length||a(new Error("Route not found")),o.routes[t].geometry=e.decode(o.routes[t].geometry,n),u.itinerary.itineraryPoints.removeAll(),u.itinerary.maneuvers.removeAll();let s=["kTurnLeft","kTurnRight","kTurnSharpLeft","kTurnSharpRight","kTurnSlightLeft","kTurnSlightRight","kContinueStraight","kRoundaboutRight","kRoundaboutExit","kUturnLeft","kArriveDefault","kDepartDefault","kStayLeft","kStayRight"],d=t,c=window.L.travelNotes.itineraryPoint;c.latLng=o.routes[t].geometry[d],u.itinerary.itineraryPoints.add(c),d++,o.routes[t].segments.forEach(function(e){e.steps.forEach(function(e){let n=window.L.travelNotes.maneuver;for(n.iconName=s[e.type]||"kUndefined",n.instruction=e.instruction,n.duration=e.duration,n.distance=e.distance,n.itineraryPointObjId=u.itinerary.itineraryPoints.last.objId,u.itinerary.maneuvers.add(n);d<=e.way_points[r];)(c=window.L.travelNotes.itineraryPoint).latLng=o.routes[t].geometry[d],u.itinerary.itineraryPoints.add(c),d++})});let l=u.wayPoints.iterator;o.routes[t].way_points.forEach(function(e){l.done||(l.value.latLng=o.routes[t].geometry[e])}),i(u)})(o,s,d)).catch(e=>d(e))}return{getPromiseRoute:e=>(e=e,u=e,new Promise(s)),get icon(){return"iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABmJLR0QAzwBfAF8OMuGdAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA\t\t\t\tB3RJTUUH4QoBEgIhgj0YgQAAAmdJREFUSMftlk9LYlEYxn+WinqdaWga0owaa9RWFS2iTZt27YJu5K4bFNSqFkFEcaHvUNAmUjdC\t\t\t\tGdQHqE8QGVGRY1BpOZEFGepo+WcW43WySWYZAz6rc5/3HH7nfR84XJV/ZCTPO6iKd1IFXAFXwP8/WP3a0FutmEURQ2sr5PMkgkEi\t\t\t\t6+ukr64A6HS5SvZnUilSoRBht5v09TVVgoDF6eRDeztqg4FMPE48EODH5ibP0ejbHWvq6vg2O4umpobvskxAltHW1mKbn0drMpUA\t\t\t\tDyQJvyRxubKC0W6naWwMgObxcT739nK5vMzhxARXHg+1PT20TE2VH7VZFKnW6Yj4fDzd3vIcjRLx+VDr9ZgGBv4alwqIn5wAoLNY\t\t\t\tADC2tQEg2O3kczke/X4OJInAwkJ5sHIoeXZW9JS1UnupvErFx44OAH5eXPzef34OQIMo4lhcRHA4/p2x2mgEIJtMFj1lrdQUvcz6\t\t\t\t8fiYcOE7tLpKy/Q0+sZGDE1N2ObmeNjfJ+x2k43F3u5YgVQLQtGrLgAziUQJ2D86yvnSErlMhiqNhszDAwDPd3cEZJmwx8NTwfvU\t\t\t\t1cXXycnyo44HAsV8FAk2GwCJ09PSfPN5Ynt7XHu9GO12zENDf4q5HPe7u5zMzBDx+QAwWK3lwTdbW2TTacyiiNZkQltfj3lwkEwq\t\t\t\txc329ptZ3e/skAyHqevrQ2syYZNlOl0uarq7IZcrZq40Vbz46z8QXXMzDaKIodBpMhgksrFBKhQqyfZAkopnvvT3YxkeJnZ4SHht\t\t\t\tDYvTieBwoBYEsskkj0dHRLxesvF4eXDlra6AK+AKuAIup1+E4uxBnFG6zQAAAABJRU5ErkJggg=="},get name(){return"OpenRouteService"},get transitModes(){return{car:!0,bike:!0,pedestrian:!0,train:!1}},get providerKeyNeeded(){return!0},get providerKey(){return i.length},set providerKey(e){i=e},get userLanguage(){return a},set userLanguage(e){a=e}};var d}())}();